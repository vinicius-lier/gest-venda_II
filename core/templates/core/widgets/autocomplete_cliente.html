{% load static %}

<div class="autocomplete-container">
    <div class="autocomplete-input-group">
        <input type="{{ widget.type }}" 
               name="{{ widget.name }}"
               {% if widget.value != None %}value="{{ widget.value }}"{% endif %}
               {% include "django/forms/widgets/attrs.html" %}
               class="form-control autocomplete-field"
               data-type="cliente"
               placeholder="Digite o nome, CPF ou telefone do cliente">
        <span class="autocomplete-search-icon">
            <i class="fa fa-search"></i>
        </span>
    </div>
    <div class="autocomplete-results"></div>

    <!-- Campo oculto para armazenar o ID do cliente selecionado -->
    <input type="hidden" name="{{ widget.name }}" id="{{ widget.attrs.id }}" value="{{ widget.value }}" class="original-field">
    <input type="hidden" name="{{ widget.name }}_id" id="{{ widget.attrs.id }}_id" class="cliente-id-field" {% if cliente_id %}value="{{ cliente_id }}"{% endif %}>
    
    <!-- Botão para criar novo cliente -->
    <div class="mt-2">
        <button type="button" class="btn btn-sm btn-outline-primary btn-novo-cliente">
            <i class="fa fa-plus"></i> Cadastrar cliente
        </button>
    </div>
</div>

<!-- Modal para criar novo cliente -->
<div class="modal fade" id="modalNovoCliente" tabindex="-1" role="dialog" aria-labelledby="modalNovoClienteTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalNovoClienteTitle">Cadastro Rápido de Cliente</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
                <form id="formNovoCliente">
                    <div class="form-group mb-3">
                        <label for="novoClienteNome">Nome*</label>
                        <input type="text" class="form-control" id="novoClienteNome" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="novoClienteTelefone">Telefone</label>
                        <input type="text" class="form-control" id="novoClienteTelefone">
                    </div>
                    <div class="form-group mb-3">
                        <label for="novoClienteCPF">CPF</label>
                        <input type="text" class="form-control" id="novoClienteCPF">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" id="btnSalvarNovoCliente">Salvar</button>
            </div>
        </div>
    </div>
</div> 