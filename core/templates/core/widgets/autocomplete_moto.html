{% load static %}

<div class="autocomplete-container">
    <div class="autocomplete-input-group">
        <input type="{{ widget.type }}" 
               name="{{ widget.name }}"
               {% if widget.value != None %}value="{{ widget.value }}"{% endif %}
               {% include "django/forms/widgets/attrs.html" %}
               class="form-control autocomplete-field"
               data-type="moto"
               data-only-available="{{ widget.only_available }}"
               placeholder="Digite marca, modelo, placa ou matrícula da moto">
        <span class="autocomplete-search-icon">
            <i class="fa fa-search"></i>
        </span>
    </div>
    <div class="autocomplete-results"></div>

    <!-- Campo oculto para armazenar o ID da moto selecionada -->
    <input type="hidden" name="{{ widget.name }}" id="{{ widget.attrs.id }}" value="{{ widget.value }}" class="original-field">
    <input type="hidden" name="{{ widget.name }}_id" id="{{ widget.attrs.id }}_id" class="moto-id-field" {% if moto_id %}value="{{ moto_id }}"{% endif %}>
    
    <!-- Botão para criar nova moto -->
    <div class="mt-2">
        <button type="button" class="btn btn-sm btn-outline-primary btn-nova-moto">
            <i class="fa fa-plus"></i> Cadastrar moto
        </button>
    </div>
</div>

<!-- Modal para criar nova moto -->
<div class="modal fade" id="modalNovaMoto" tabindex="-1" role="dialog" aria-labelledby="modalNovaMotoTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalNovaMotoTitle">Cadastro Rápido de Moto</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
                <form id="formNovaMoto">
                    <div class="form-group mb-3">
                        <label for="novaMotoMarca">Marca*</label>
                        <input type="text" class="form-control" id="novaMotoMarca" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="novaMotoModelo">Modelo*</label>
                        <input type="text" class="form-control" id="novaMotoModelo" required>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group mb-3">
                                <label for="novaMotoAno">Ano*</label>
                                <input type="text" class="form-control" id="novaMotoAno" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group mb-3">
                                <label for="novaMotoCor">Cor*</label>
                                <input type="text" class="form-control" id="novaMotoCor" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group mb-3">
                                <label for="novaMotoPlaca">Placa</label>
                                <input type="text" class="form-control" id="novaMotoPlaca">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group mb-3">
                                <label for="novaMotoChassi">Chassi*</label>
                                <input type="text" class="form-control" id="novaMotoChassi" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label for="novaMotoValor">Valor*</label>
                        <div class="input-group">
                            <span class="input-group-text">R$</span>
                            <input type="number" step="0.01" class="form-control" id="novaMotoValor" required>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" id="btnSalvarNovaMoto">Salvar</button>
            </div>
        </div>
    </div>
</div> 